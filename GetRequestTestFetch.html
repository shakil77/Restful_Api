<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Get Request Test</title>
    <link rel="stylesheet" href="app.css">
</head>
<body id="body">
    <h1>This data has been received from a web service</h1>
    <p id="data"></p>
    <div id="table">
    </div>
    <script>
        fetch('http://127.0.0.1:8000/api/user')
            .then(response => {
                return (response.json());
            })
            .then(users => {
                let table = document.createElement('table');
                let thead = document.createElement('thead');
                let tbody = document.createElement('tbody');
                table.appendChild(thead);
                table.appendChild(tbody);

                let row_head = document.createElement('tr');
                let heading1 = document.createElement('th');
                heading1.innerHTML = "ID";
                let heading2 = document.createElement('th');
                heading2.innerHTML = "Name";
                let heading3 = document.createElement('th');
                heading3.innerHTML = "Email";

                thead.appendChild(row_head);
                row_head.appendChild(heading1);
                row_head.appendChild(heading2);
                row_head.appendChild(heading3);


                for (let i = 0; i < 15; i++) {                       //Replace this line with your code to fetch all records from the table
            //     con.connect(function(err) {
            //     if (err) throw err;
            //     con.query("SELECT * FROM users", function (err, result, fields) {
            //     if (err) throw err;
            //     console.log(result);
            //   });
            // });             
                    let row = document.createElement('tr')
                    let data1 = document.createElement('td');
                    data1.innerHTML = users.data[i].id;
                    row.appendChild(data1);
                    let data2 = document.createElement('td');
                    data2.innerHTML = users.data[i].name;
                    row.appendChild(data2);
                    let data3 = document.createElement('td');
                    data3.innerHTML = users.data[i].email;
                    row.appendChild(data3);
                    tbody.appendChild(row);
                }
                
                document.getElementById('body').appendChild(table);

            });
    </script>
</body>
</html